# BloodLink 
Система автоматизации взаимодействия между банками крови и медицинскими учреждениями

## Навигация по проекту
* [Задание](Task.md)
* [Документация](documentation)
    * [Source requirements](documentation/Srs.docx)
    * [Database organization](documentation/databaseDocs)
* [Backend](backend)
* [Frontend](frontend)

## Краткое описание

Это мой второй более менее крупный проект. Для подробного ознакомления с проектом предлагается прочитать [Source requirements](documentation/Srs.docx).
Система включет в себя три вида пользователей: *Администраторы*, *Работники медецинских учрежедений*, *Сотрудники банков крови*. Пройдемся по каждому из видов и ознакомся с их основными возможностями.

* **Регистрация и Авторизация**
    
    Здесь особо расссказывать нечего. Вот [так](images/authorizationPage.png) выглядит страница с авторизацией. А вот [так](/images/registrationPage.png) страница регистрации. 
Процесс регистрации выглядит следующим образом: Сперва есть возможность полностью зарегистрироваться только у админа. 
После того как в систетме появляется администратор, все остальные пользователи нажимая кнопку зарегистрироваться 
отправляют запрос к администратору(-ам), который уже зарегистрирован в системе. Администратор может принять или отклонить 
запрос.


* **Администратор**

    У администратора есть три интерфейста:
    * [Интерфейс с заявками на регистрацию.](images/registrationRequestsPage.png) Администратор может принимать и отклонять их.
    * [Интерфейс с организациями](images/allOrganizationPage.png), зарегистрированными в системе. Здесь админ может удалить организацию, создать новую или 
[отредактировать](images/editOrganizationWindow.png) уже существующую.
    * [Интерфейс с уже зарегестрированными пользователями](images/allUsersPage.png). Здесь админ может удалять пользователей.

    На всех трех страницах есть возможность динамического поиска. 


* **Работник медицинского учреждения**
    
    * Работники медицинских учреждений имеют всего 1 интерфейс, который позволяет им [создавать](images/createBloodRequestWindow1.png) и [просматривать](images/allBloodRequestPage.png) заявки на 
новую кровь. Заявку можно подать [сразу нескольким банкам](images/createBloodRequestWindow2.png).
    * Также врачи могут [просматривать подробную информацию о каждой заявке](images/additionalInformationBloodRequest.png) 
и сортировать заявки по их статусу (В ожидании, Отклонено, Принято).


* **Сотрудник банка крови**
    
    У сотрудников банков крови есть 2 интерфейса:
  *  [Интерфейс с партиями крови](images/BloodUnitsPage.png). Страница содержит все партии крови, которые есть в банке сотрудника. Есть удобные селекторы
для быстрого поиска нужной партии, а также [возможность добавить новую партию крови](images/createNewBloodUnitWindow.png).
Также сотрудники могут редактировать и удалять партии крови. В верхней строке над запасами, представлено общее количество крови, выбранной группы и фактора.
  * [Интерфейс с входящими заявками от банков крови](images/bloodRequestsBankPage.png). Страница содержит все запросы, 
которые когда-либо поступали в банк сотрудника. Есть удобные селекторы для быстрого поиска нужного запроса. 
Также есть возможность принять или отклонить заявку, с указанием причины отклонения. Есть возможность просмотра подробной информации о заявке.
  

* **Прочее**
 
  * У каждого сотрудника есть панель с [уведомлениями](images/notifications.png).
  * **[Детали]** В приложении есть *запланированная задача*, которая проходится по таблице BloodUnits раз в 24 часа и удаляет просрочные партии крови, уведомляя об этом сотрудников банка
(да, у партий крови есть свой срок годности).
  * **[Детали]** В приложении есть триггер, который при каждой *DML операции* обновляет общее количество крови определенного вида,
которое хранится в другой таблице, тем самым при отображении общего количества крови определенного вида приложение
не проходит по всей таблице BloodUnits и не складывает партии крови, а просто берет информацию из дополнительной таблицы
  * **[Детали]** В приложении предусмотренно несколько индексов для оптимизации запросов

    
Подробно ознакомиться с организацией базы данных (таблицы, триггеры, индексы, представления) можно в [этом разделе](backend/db). Здесь представлены скрипты, которые используются для управления базой.

    spring.jpa.hibernate.ddl-auto=none # Hibernate базой не управляет


## Техническое описание

Проект не использует каких-то серьезный enterprise технологий. В них не было необходимости, но при желании проект можно 
расширять и добавлять массу нового функционала.

### Backend

* Написан на *Spring*
* База данных *PostgreSQL*
* Для развертки базы данных используется *Docker*.
* Проект использует лишь основные "концепции\фреймворки" *Spring* среди которых можно отметить:
    * *SpringMVC*
    * *SpringSecurity*
    * *Java Transaction API*
    * *Spring DATA (Hibernate)*
    * *Jakarta Validation*
* Для большинства запросов используется *Page* и *Specification* интерфейсы (ну это уже, конечно, мелочи)

### Frontend

* Написан на Vue.
* Для актуализации данных используется *polling* метод.
* Для более компактной кастомизации фронта использую *TailWind* css-фреймворк.

## Инструкция по развертыванию

* Убедитесь, что у вас установлены
  * Java 23
  * Docker 27.4.0
  * Node.js 22.14.0
* Приложение доступно по адресу localhost:5353 - это адрес фронт сервера. Бэкэнд часть работает на порту 8080.
* Для запуска компилируем бэк
  1. ./gradlew build
  2. ./gradlew bootRun
* Фронт запускается примерно так
  1. npm install
  2. npm run dev